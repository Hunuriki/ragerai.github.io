<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¸‚å¤–å±€ç•ªã‚¯ã‚¤ã‚º</title>
    <style>
        /* Google Fontsã‹ã‚‰ãƒ•ã‚©ãƒ³ãƒˆã‚’èª­ã¿è¾¼ã¿ */
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&family=Roboto:wght@700&display=swap');

        :root {
            --primary-color: #003366;
            --light-gray: #f0f0f0;
            --correct-color: #28a745;
            --incorrect-color: #dc3545;
            --correct-bg: #d4edda;
            --incorrect-bg: #f8d7da;
        }

        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background-color: var(--light-gray);
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 1rem;
            box-sizing: border-box;
        }

        .quiz-container {
            background-color: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            text-align: center;
        }

        #question-num-label {
            font-size: 1.5rem;
            font-weight: 700;
            color: #555;
        }

        #code-label {
            font-family: 'Roboto', sans-serif;
            font-size: clamp(3rem, 12vw, 5rem); /* ç”»é¢ã‚µã‚¤ã‚ºã«å¿œã˜ã¦èª¿æ•´ */
            font-weight: 700;
            color: var(--primary-color);
            margin: 1.5rem 0;
        }

        #choices-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .choice-btn {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            padding: 1rem;
            border: 2px solid #ddd;
            border-radius: 10px;
            background-color: #fff;
            cursor: pointer;
            transition: all 0.2s ease;
            /* ãƒ†ã‚­ã‚¹ãƒˆãŒã¯ã¿å‡ºã•ãªã„ã‚ˆã†ã«èª¿æ•´ */
            word-break: break-word;
            min-height: 4em;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .choice-btn:hover:not(:disabled) {
            background-color: #f8f8f8;
            border-color: var(--primary-color);
            transform: translateY(-3px);
        }
        
        .choice-btn:disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        #feedback-label {
            font-size: 1.2rem;
            font-weight: 700;
            min-height: 1.5em; /* é«˜ã•ã‚’ç¢ºä¿ã—ã¦ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒå´©ã‚Œãªã„ã‚ˆã†ã« */
            margin: 1.5rem 0;
        }

        #next-button {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            padding: 0.8rem 2rem;
            border-radius: 10px;
            border: none;
            background-color: var(--primary-color);
            color: white;
            cursor: pointer;
            transition: background-color 0.2s ease;
            visibility: hidden; /* æœ€åˆã¯éè¡¨ç¤º */
        }

        #next-button:hover {
            background-color: #0055aa;
        }
        
        .footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
        }

        #score-label {
            font-size: 0.9rem;
            color: #666;
        }

        #reset-button {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background: none;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 0.3rem 0.6rem;
            cursor: pointer;
            color: #666;
        }
        #reset-button:hover {
            background-color: #eee;
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <h2 id="question-num-label"></h2>
        <h1 id="code-label"></h1>
        <div id="choices-container">
            <!-- é¸æŠè‚¢ãƒœã‚¿ãƒ³ã¯JSã§ç”Ÿæˆ -->
        </div>
        <p id="feedback-label"></p>
        <button id="next-button">æ¬¡ã®å•é¡Œã¸ (Enter)</button>
        
        <div class="footer">
            <p id="score-label"></p>
            <button id="reset-button">æˆç¸¾ãƒªã‚»ãƒƒãƒˆ</button>
        </div>
    </div>

    <script>
        // å¸‚å¤–å±€ç•ªãƒ‡ãƒ¼ã‚¿ã‚’ç›´æ¥JSã«è¨˜è¿° (ã¾ã¨ã‚ã‚‰ã‚ŒãŸå¸‚ç”ºæ‘åã®ã¾ã¾æ›´æ–°)
        const areaData = [
            { city: 'æœ­å¹Œ', code: '11' }, { city: 'æ—­å·', code: '166' }, { city: 'å‡½é¤¨', code: '138' },
            { city: 'é‡§è·¯', code: '154' }, { city: 'å°æ¨½', code: '134' }, { city: 'å®¤è˜­', code: '143' },
            { city: 'å¸¯åºƒ', code: '155' }, { city: 'è‹«å°ç‰§', code: '144' }, { city: 'åŒ—è¦‹', code: '157' },
            { city: 'åƒæ­³', code: '123' }, { city: 'æ ¹å®¤', code: '1532' }, { city: 'é’æ£®', code: '177' },
            { city: 'å…«æˆ¸', code: '178' }, { city: 'å¼˜å‰,é»’çŸ³', code: '172' }, { city: 'åå’Œç”°', code: '176' },
            { city: 'äº”æ‰€å·åŸ', code: '173' }, { city: 'ç››å²¡', code: '19' }, { city: 'é‡œçŸ³', code: '193' },
            { city: 'èŠ±å·»', code: '198' }, { city: 'ä¸€é–¢', code: '191' }, { city: 'ä»™å°', code: '22' },
            { city: 'çŸ³å·»', code: '225' }, { city: 'æ°—ä»™æ²¼', code: '226' }, { city: 'å¤å·', code: '229' },
            { city: 'ç§‹ç”°', code: '188' }, { city: 'å¤§é¤¨', code: '186' }, { city: 'èƒ½ä»£', code: '185' },
            { city: 'å±±å½¢,è”µç‹æ¸©æ³‰', code: '236' }, { city: 'é…’ç”°', code: '234' }, { city: 'é¶´å²¡', code: '235' },
            { city: 'ç±³æ²¢', code: '238' }, { city: 'ç¦å³¶', code: '245' }, { city: 'ã„ã‚ã', code: '246' },
            { city: 'éƒ¡å±±', code: '249' }, { city: 'ä¼šæ´¥è‹¥æ¾', code: '242' }, { city: 'å–œå¤šæ–¹', code: '241' },
            { city: 'æ°´æˆ¸,ã²ãŸã¡ãªã‹', code: '29' }, { city: 'æ—¥ç«‹', code: '294' }, { city: 'åœŸæµ¦,ã¤ãã°', code: '298' },
            { city: 'å–æ‰‹', code: '297' }, { city: 'å®‡éƒ½å®®', code: '28' }, { city: 'è¶³åˆ©', code: '284' },
            { city: 'å°å±±', code: '285' }, { city: 'æ ƒæœ¨', code: '282' }, { city: 'é¹¿æ²¼', code: '289' },
            { city: 'æ—¥å…‰,é¬¼æ€’å·', code: '288' }, { city: 'å‰æ©‹,é«˜å´', code: '27' }, { city: 'æ¡ç”Ÿ', code: '277' },
            { city: 'ä¼Šå‹¢å´', code: '270' }, { city: 'å¤ªç”°,é¤¨æ—', code: '276' }, { city: 'æ²¼ç”°', code: '278' },
            { city: 'æ¸‹å·', code: '279' }, { city: 'è—¤å²¡,å¯Œå²¡', code: '274' }, { city: 'å®‰ä¸­', code: '273' },
            { city: 'æµ¦å’Œ,å¤§å®®,å·å£,æ˜¥æ—¥éƒ¨', code: '48' }, { city: 'å·è¶Š', code: '492' }, { city: 'ç†Šè°·', code: '485' },
            { city: 'æ‰€æ²¢', code: '429' }, { city: 'è¶Šè°·,è‰åŠ ', code: '489' }, { city: 'ç§©çˆ¶', code: '494' },
            { city: 'åƒè‘‰', code: '43' }, { city: 'èˆ¹æ©‹,å…«åƒä»£,ç¿’å¿—é‡', code: '474' }, { city: 'æ¾æˆ¸,å¸‚å·,æµ¦å®‰', code: '47' },
            { city: 'æŸ,æˆ‘å­«å­,é‡ç”°,æµå±±', code: '471' }, { city: 'å¸‚åŸ', code: '436' }, { city: 'æœ¨æ›´æ´¥', code: '438' },
            { city: 'éŠšå­', code: '479' }, { city: 'æˆç”°', code: '476' }, { city: 'åŒºéƒ¨', code: '3' },
            { city: 'å…«ç‹å­', code: '426' }, { city: 'ç”ºç”°,ç›¸æ¨¡åŸ', code: '427' }, { city: 'åºœä¸­,å°å¹³,æ±æ‘å±±,å°é‡‘äº•,å›½åˆ†å¯º,å¤šæ‘©', code: '423' },
            { city: 'èª¿å¸ƒ,æ±ä¹…ç•™ç±³,ä¿è°·,ç”°ç„¡', code: '424' }, { city: 'ä¸‰é·¹,æ­¦è”µé‡', code: '422' }, { city: 'ç«‹å·,æ—¥é‡,æ˜­å³¶,æ±å¤§å’Œ,å›½ç«‹', code: '425' },
            { city: 'é’æ¢…', code: '428' }, { city: 'æ¨ªæµœ', code: '45' }, { city: 'å·å´', code: '44' },
            { city: 'æ¨ªé ˆè³€,é€—å­,è‘‰å±±', code: '468' }, { city: 'è—¤æ²¢', code: '466' }, { city: 'å¹³å¡š,ç§¦é‡', code: '463' },
            { city: 'å°ç”°åŸ', code: '465' }, { city: 'éŒå€‰,èŒ…ãƒ¶å´', code: '467' }, { city: 'å¤§å’Œ,åšæœ¨,åº§é–“', code: '462' },
            { city: 'ç®±æ ¹', code: '460' }, { city: 'ç”²åºœ', code: '552' }, { city: 'å¯Œå£«å‰ç”°', code: '555' },
            { city: 'å±±æ¢¨', code: '553' }, { city: 'å¤§æœˆ', code: '554' }, { city: 'æ–°æ½Ÿ', code: '25' },
            { city: 'é•·å²¡', code: '258' }, { city: 'ä¸Šè¶Š', code: '255' }, { city: 'ä¸‰æ¡', code: '256' },
            { city: 'æŸå´,åæ—¥ç”º,æ¹¯æ²¢', code: '257' }, { city: 'é•·é‡', code: '26' }, { city: 'æ¾æœ¬', code: '263' },
            { city: 'ä¸Šç”°', code: '268' }, { city: 'é£¯ç”°', code: '265' }, { city: 'è»½äº•æ²¢', code: '267' },
            { city: 'å¯Œå±±', code: '764' }, { city: 'é«˜å²¡,æ°·è¦‹', code: '766' }, { city: 'é‡‘æ²¢', code: '762' },
            { city: 'å°æ¾', code: '761' }, { city: 'åŠ è³€', code: '7617' }, { city: 'ç¦äº•', code: '776' },
            { city: 'æ­¦ç”Ÿ,é¯–æ±Ÿ', code: '778' }, { city: 'æ•¦è³€', code: '770' }, { city: 'å²é˜œ', code: '58' },
            { city: 'å¤§å£', code: '584' }, { city: 'é«˜å±±', code: '577' }, { city: 'å¤šæ²»è¦‹', code: '572' },
            { city: 'é™å²¡,ç„¼æ´¥', code: '54' }, { city: 'æµœæ¾', code: '53' }, { city: 'æ²¼æ´¥,ä¸‰å³¶', code: '559' },
            { city: 'ç†±æµ·,ä¼Šæ±', code: '557' }, { city: 'å¯Œå£«å®®', code: '544' }, { city: 'å¯Œå£«', code: '545' },
            { city: 'åå¤å±‹', code: '52' }, { city: 'è±Šæ©‹', code: '532' }, { city: 'å²¡å´', code: '564' },
            { city: 'ä¸€å®®', code: '586' }, { city: 'ç€¬æˆ¸', code: '561' }, { city: 'åŠç”°,å¸¸æ»‘', code: '569' },
            { city: 'æ˜¥æ—¥äº•,çŠ¬å±±,å°ç‰§', code: '568' }, { city: 'è±Šå·,è’²éƒ¡', code: '533' }, { city: 'æ´¥å³¶', code: '567' },
            { city: 'è±Šç”°', code: '565' }, { city: 'å®‰åŸ', code: '566' }, { city: 'è¥¿å°¾', code: '563' },
            { city: 'æ´¥', code: '59' }, { city: 'å››æ—¥å¸‚,éˆ´é¹¿', code: '593' }, { city: 'ä¼Šå‹¢', code: '596' },
            { city: 'æ¾é˜ª', code: '598' }, { city: 'æ¡‘å', code: '594' }, { city: 'ä¸Šé‡', code: '595' },
            { city: 'é³¥ç¾½', code: '599' }, { city: 'å¤§æ´¥', code: '775' }, { city: 'å½¦æ ¹,é•·æµœ', code: '749' },
            { city: 'äº¬éƒ½', code: '75' }, { city: 'ç¦çŸ¥å±±,èˆé¶´', code: '773' }, { city: 'å®‡æ²»', code: '774' },
            { city: 'å¤§é˜ª,è±Šä¸­,å¹ç”°,å®ˆå£,é–€çœŸ,æ±å¤§é˜ª,å°¼å´', code: '6' }, { city: 'å º', code: '722' }, { city: 'å²¸å’Œç”°', code: '724' },
            { city: 'æ± ç”°,ç®•é¢,ä¼Šä¸¹,å·è¥¿', code: '727' }, { city: 'æ³‰å¤§æ´¥,å’Œæ³‰', code: '725' }, { city: 'é«˜æ§»,èŒ¨æœ¨', code: '726' },
            { city: 'æšæ–¹,å¯å±‹å·,å¤§æ±', code: '720' }, { city: 'å…«å°¾', code: '729' }, { city: 'æ²³å†…é•·é‡', code: '721' },
            { city: 'æ¾åŸ', code: '723' }, { city: 'ç¥æˆ¸,æ˜çŸ³', code: '78' }, { city: 'å§«è·¯', code: '792' },
            { city: 'è¥¿å®®', code: '798' }, { city: 'èŠ¦å±‹,å®å¡š', code: '797' }, { city: 'åŠ å¤å·,ä¸‰æœ¨', code: '794' },
            { city: 'ä¸‰ç”°', code: '795' }, { city: 'å¥ˆè‰¯', code: '742' }, { city: 'å¤§å’Œé«˜ç”°', code: '745' },
            { city: 'å¤©ç†', code: '743' }, { city: 'æ¡œäº•', code: '744' }, { city: 'å’Œæ­Œå±±', code: '734' },
            { city: 'ç”°è¾º', code: '739' }, { city: 'é³¥å–', code: '857' }, { city: 'ç±³å­', code: '859' },
            { city: 'æ¾æ±Ÿ', code: '852' }, { city: 'å‡ºé›²', code: '853' }, { city: 'å²¡å±±', code: '862' },
            { city: 'å€‰æ•·', code: '864' }, { city: 'æ´¥å±±', code: '868' }, { city: 'åºƒå³¶', code: '82' },
            { city: 'å‘‰', code: '823' }, { city: 'ç¦å±±', code: '849' }, { city: 'å°¾é“', code: '848' },
            { city: 'ä¸‹é–¢', code: '832' }, { city: 'å®‡éƒ¨', code: '836' }, { city: 'å±±å£', code: '839' },
            { city: 'å¾³å³¶', code: '886' }, { city: 'é«˜æ¾', code: '878' }, { city: 'æ¾å±±', code: '89' },
            { city: 'ä»Šæ²»', code: '898' }, { city: 'å®‡å’Œå³¶', code: '895' }, { city: 'é«˜çŸ¥', code: '888' },
            { city: 'ç¦å²¡', code: '92' }, { city: 'åŒ—ä¹å·', code: '93' }, { city: 'ä¹…ç•™ç±³', code: '942' },
            { city: 'å¤§ç‰Ÿç”°', code: '944' }, { city: 'ä½è³€', code: '952' }, { city: 'å”æ´¥', code: '955' },
            { city: 'é•·å´', code: '958' }, { city: 'ä½ä¸–ä¿', code: '956' }, { city: 'ç†Šæœ¬', code: '96' },
            { city: 'å…«ä»£', code: '965' }, { city: 'å¤§åˆ†', code: '975' }, { city: 'åˆ¥åºœ', code: '977' },
            { city: 'å®®å´', code: '985' }, { city: 'éƒ½åŸ', code: '986' }, { city: 'å»¶å²¡', code: '982' },
            { city: 'é¹¿å…å³¶', code: '99' }, { city: 'å·å†…', code: '996' }, { city: 'é¹¿å±‹', code: '994' },
            { city: 'é‚£è¦‡', code: '98' }
        ];

        // DOMè¦ç´ ã®å–å¾—
        const questionNumLabel = document.getElementById('question-num-label');
        const codeLabel = document.getElementById('code-label');
        const choicesContainer = document.getElementById('choices-container');
        const feedbackLabel = document.getElementById('feedback-label');
        const nextButton = document.getElementById('next-button');
        const scoreLabel = document.getElementById('score-label');
        const resetButton = document.getElementById('reset-button');

        // ã‚²ãƒ¼ãƒ ã®çŠ¶æ…‹å¤‰æ•°
        let questionCount = 0;
        let currentGameCorrect = 0;
        let correctCity = '';
        let choices = [];
        
        // ã‚¹ã‚³ã‚¢ (localStorageã‹ã‚‰èª­ã¿è¾¼ã¿)
        let totalCorrect = parseInt(localStorage.getItem('totalCorrect')) || 0;
        let totalQuestions = parseInt(localStorage.getItem('totalQuestions')) || 0;

        function startGame() {
            questionCount = 0;
            currentGameCorrect = 0;
            nextQuestion();
        }

        function nextQuestion() {
            questionCount++;
            if (questionCount > 10) {
                showFinalResult();
                return;
            }

            // UIãƒªã‚»ãƒƒãƒˆ
            feedbackLabel.textContent = '';
            nextButton.style.visibility = 'hidden';
            choicesContainer.innerHTML = ''; // é¸æŠè‚¢ã‚’ã‚¯ãƒªã‚¢

            questionNumLabel.textContent = `ç¬¬ ${questionCount} å• / 10å•`;

            // å•é¡Œã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠ
            const correctIndex = Math.floor(Math.random() * areaData.length);
            const correctData = areaData[correctIndex];
            correctCity = correctData.city;
            
            codeLabel.textContent = `0${correctData.code}`;

            // é¸æŠè‚¢ã‚’ä½œæˆ
            let currentChoices = new Set([correctCity]);
            const searchRange = 15;
            let minIndex = Math.max(0, correctIndex - searchRange);
            let maxIndex = Math.min(areaData.length - 1, correctIndex + searchRange);

            // è¿‘å‚ã‹ã‚‰ä¸æ­£è§£ã®é¸æŠè‚¢ã‚’è¿½åŠ 
            let nearbyIndices = [];
            for (let i = minIndex; i <= maxIndex; i++) {
                if (i !== correctIndex) nearbyIndices.push(i);
            }
            
            // Fisher-Yatesã‚·ãƒ£ãƒƒãƒ•ãƒ«
            for (let i = nearbyIndices.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [nearbyIndices[i], nearbyIndices[j]] = [nearbyIndices[j], nearbyIndices[i]];
            }

            for(const idx of nearbyIndices) {
                if (currentChoices.size < 4) {
                    currentChoices.add(areaData[idx].city);
                }
            }

            // é¸æŠè‚¢ãŒ4ã¤ã«æº€ãŸãªã„å ´åˆã€å…¨ä½“ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«è£œã†
            while (currentChoices.size < 4) {
                const randomData = areaData[Math.floor(Math.random() * areaData.length)];
                currentChoices.add(randomData.city);
            }

            choices = Array.from(currentChoices);
            // ã‚·ãƒ£ãƒƒãƒ•ãƒ«
            for (let i = choices.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [choices[i], choices[j]] = [choices[j], choices[i]];
            }

            // ãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆã—ã¦è¡¨ç¤º
            choices.forEach((choice, index) => {
                const button = document.createElement('button');
                button.textContent = `(${index + 1}) ${choice}`;
                button.classList.add('choice-btn');
                button.onclick = () => checkAnswer(choice, button);
                choicesContainer.appendChild(button);
            });

            updateScoreDisplay();
        }

        function checkAnswer(selectedAnswer, selectedButton) {
            // å…¨ã¦ã®ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            const buttons = choicesContainer.getElementsByTagName('button');
            for(const btn of buttons) {
                btn.disabled = true;
            }

            totalQuestions++;
            if (selectedAnswer === correctCity) {
                currentGameCorrect++;
                totalCorrect++;
                feedbackLabel.textContent = 'æ­£è§£ï¼';
                feedbackLabel.style.color = 'var(--correct-color)';
                selectedButton.style.backgroundColor = 'var(--correct-bg)';
            } else {
                feedbackLabel.textContent = `ä¸æ­£è§£... æ­£è§£ã¯ã€Œ${correctCity}ã€`;
                feedbackLabel.style.color = 'var(--incorrect-color)';
                selectedButton.style.backgroundColor = 'var(--incorrect-bg)';
                // æ­£è§£ã®ãƒœã‚¿ãƒ³ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
                for(const btn of buttons) {
                    // textContentãŒå®Œå…¨ã«ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’æ¢ã™
                    if (btn.textContent === `(${choices.indexOf(correctCity) + 1}) ${correctCity}`) {
                        btn.style.backgroundColor = 'var(--correct-bg)';
                        break;
                    }
                }
            }

            // ã‚¹ã‚³ã‚¢ã‚’ä¿å­˜
            localStorage.setItem('totalCorrect', totalCorrect);
            localStorage.setItem('totalQuestions', totalQuestions);

            updateScoreDisplay();
            nextButton.style.visibility = 'visible';
        }

        function updateScoreDisplay() {
            const rate = totalQuestions > 0 ? (totalCorrect / totalQuestions) * 100 : 0;
            scoreLabel.textContent = `ç´¯è¨ˆã‚¹ã‚³ã‚¢: ${totalCorrect} / ${totalQuestions} (æ­£è§£ç‡: ${rate.toFixed(1)}%)`;
        }
        
        function resetScore() {
            if (confirm('æœ¬å½“ã«ã™ã¹ã¦ã®æˆç¸¾ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                totalCorrect = 0;
                totalQuestions = 0;
                localStorage.removeItem('totalCorrect');
                localStorage.removeItem('totalQuestions');
                updateScoreDisplay();
                alert('æˆç¸¾ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸã€‚');
            }
        }

        function showFinalResult() {
            const message = `ä»Šå›ã®æˆç¸¾: 10å•ä¸­ ${currentGameCorrect} å•æ­£è§£ã§ã—ãŸï¼\n\nã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤ã—ã¾ã™ã‹ï¼Ÿ`;
            if (confirm(message)) {
                startGame();
            } else {
                questionNumLabel.textContent = 'ãƒ—ãƒ¬ã‚¤ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼';
                codeLabel.textContent = 'ğŸ˜Š';
                choicesContainer.innerHTML = '';
                feedbackLabel.textContent = '';
                nextButton.style.visibility = 'hidden';
            }
        }
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
        nextButton.addEventListener('click', nextQuestion);
        resetButton.addEventListener('click', resetScore);

        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ
        document.addEventListener('keydown', (e) => {
            const key = parseInt(e.key);
            if (key >= 1 && key <= 4) {
                const buttons = choicesContainer.getElementsByTagName('button');
                if (buttons[key - 1] && !buttons[key - 1].disabled) {
                    buttons[key - 1].click();
                }
            } else if (e.key === 'Enter') {
                if (nextButton.style.visibility === 'visible') {
                    nextButton.click();
                }
            }
        });

        // ã‚²ãƒ¼ãƒ é–‹å§‹
        startGame();

    </script>
</body>
</html>
